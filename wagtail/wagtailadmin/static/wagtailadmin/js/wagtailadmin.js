webpackJsonp([1],{0:function(e,t,n){"use strict";var r=n(300);document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("[data-explorer-menu]"),t=document.querySelector("[data-explorer-start-page]");e&&t&&(0,r.initExplorer)(e,t)})},300:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initExplorer=t.ExplorerToggle=t.Explorer=t.Transition=t.LoadingSpinner=t.PublicationStatus=t.Icon=t.Button=void 0;var a=n(301),i=r(a),o=n(329),l=r(o),u=n(330),s=r(u),c=n(331),d=r(c),p=n(333),f=r(p),m=n(485),_=r(m);t.Button=i.default,t.Icon=l.default,t.PublicationStatus=s.default,t.LoadingSpinner=d.default,t.Transition=f.default,t.Explorer=_.default,t.ExplorerToggle=m.ExplorerToggle,t.initExplorer=m.initExplorer},301:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(302),i=r(a),o=function(e,t){var n=""!==t,r="";return n&&(r="string"==typeof t?" icon-"+t:t.map(function(e){return" icon-"+e}).join("")),e+" "+(n?"icon":"")+r},l=function(e,t,n,r){n&&"#"===e&&(r.preventDefault(),r.stopPropagation()),t&&t(r)},u=function(e){var t=e.className,n=e.icon,r=e.children,a=e.accessibleLabel,u=e.isLoading,s=e.href,c=e.target,d=e.preventDefault,p=e.onClick,f=null!==r,m=u?"spinner":n,_=a?i.default.createElement("span",{className:"visuallyhidden"},a):null;return i.default.createElement("a",{className:o(t,m),onClick:l.bind(null,s,p,d),rel:"_blank"===c?"noopener noreferrer":null,href:s,target:c},f?r:_)};u.propTypes={href:i.default.PropTypes.string,className:i.default.PropTypes.string,icon:i.default.PropTypes.oneOfType([i.default.PropTypes.string,i.default.PropTypes.arrayOf(i.default.PropTypes.string)]),target:i.default.PropTypes.string,children:i.default.PropTypes.node,accessibleLabel:i.default.PropTypes.string,onClick:i.default.PropTypes.func,isLoading:i.default.PropTypes.bool,preventDefault:i.default.PropTypes.bool},u.defaultProps={href:"#",className:"",icon:"",target:null,children:null,accessibleLabel:null,onClick:null,isLoading:!1,preventDefault:!0},t.default=u},329:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(302),i=r(a),o=function(e){var t=e.name,n=e.className,r=e.title;return i.default.createElement("span",null,i.default.createElement("span",{className:"icon icon-"+t+" "+n,"aria-hidden":!0}),r?i.default.createElement("span",{className:"visuallyhidden"},r):null)};o.propTypes={name:i.default.PropTypes.string.isRequired,className:i.default.PropTypes.string,title:i.default.PropTypes.string},o.defaultProps={className:"",title:null},t.default=o},330:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(302),i=r(a),o=function(e){var t=e.status;return i.default.createElement("span",{className:"o-pill c-status"+(t.live?" c-status--live":"")},t.status)};o.propTypes={status:i.default.PropTypes.shape({live:i.default.PropTypes.bool.isRequired,status:i.default.PropTypes.string.isRequired}).isRequired},t.default=o},331:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(302),i=r(a),o=n(332),l=n(329),u=r(l),s=function(){return i.default.createElement("span",null,i.default.createElement(u.default,{name:"spinner",className:"c-spinner"})," "+o.STRINGS.LOADING)};t.default=s},332:function(e,t){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ADMIN_API=e.wagtailConfig.ADMIN_API,t.STRINGS=e.wagtailConfig.STRINGS,t.ADMIN_URLS=e.wagtailConfig.ADMIN_URLS,t.MAX_EXPLORER_PAGES=200}).call(t,function(){return this}())},333:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FADE=t.POP=t.PUSH=void 0;var a=n(302),i=r(a),o=n(334),l=r(o),u=210,s=t.PUSH="push",c=t.POP="pop",d=t.FADE="fade",p=function(e){var t=e.name,n=e.component,r=e.className,a=e.duration,o=e.children;return i.default.createElement(l.default,{component:n,transitionEnterTimeout:a,transitionLeaveTimeout:a,transitionName:"c-transition-"+t,className:r},o)};p.propTypes={name:i.default.PropTypes.oneOf([s,c,d]).isRequired,component:i.default.PropTypes.string,className:i.default.PropTypes.string,duration:i.default.PropTypes.number,children:i.default.PropTypes.node},p.defaultProps={component:"div",children:null,className:null,duration:u},t.default=p},485:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initExplorer=t.ExplorerToggle=void 0;var a=n(302),i=r(a),o=n(486),l=r(o),u=n(487),s=n(498),c=n(524),d=r(c),p=n(525),f=r(p),m=n(598),_=r(m),P=n(599),h=r(P),E=n(600),g=r(E),y=function(e,t){var n=(0,s.combineReducers)({explorer:h.default,nodes:g.default}),r=[d.default],a=(0,s.createStore)(n,{},(0,s.compose)(s.applyMiddleware.apply(void 0,r),window.devToolsExtension?window.devToolsExtension():function(e){return e})),o=parseInt(t.getAttribute("data-explorer-start-page"),10);l.default.render(i.default.createElement(u.Provider,{store:a},i.default.createElement(_.default,{startPage:o},t.textContent)),t.parentNode),l.default.render(i.default.createElement(u.Provider,{store:a},i.default.createElement(f.default,null)),e)};t.default=f.default,t.ExplorerToggle=_.default,t.initExplorer=y},525:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(302),o=a(i),l=n(487),u=n(526),s=r(u),c=n(591),d=a(c),p=function(e){var t=e.isVisible,n=e.nodes,r=e.path,a=e.pushPage,i=e.popPage,l=e.onClose,u=n[r[r.length-1]];return t?o.default.createElement(d.default,{path:r,page:u,nodes:n,onClose:l,popPage:i,pushPage:a}):null};p.propTypes={isVisible:o.default.PropTypes.bool.isRequired,path:o.default.PropTypes.array.isRequired,nodes:o.default.PropTypes.object.isRequired,pushPage:o.default.PropTypes.func.isRequired,popPage:o.default.PropTypes.func.isRequired,onClose:o.default.PropTypes.func.isRequired};var f=function(e){return{isVisible:e.explorer.isVisible,path:e.explorer.path,nodes:e.nodes}},m=function(e){return{pushPage:function(t){return e(s.pushPage(t))},popPage:function(){return e(s.popPage())},onClose:function(){return e(s.closeExplorer())}}};t.default=(0,l.connect)(f,m)(p)},526:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return function(t){return t(p(e)),c.getPage(e).then(function(n){t(f(e,n))},function(n){t(m(e,n))})}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n(_(e)),c.getPageChildren(e,{offset:t}).then(function(r){var a=r.items,o=r.meta,l=t+a.length;n(P(e,a,o)),l<o.total_count&&l<d.MAX_EXPLORER_PAGES&&n(i(e,l))},function(t){n(h(e,t))})}}function o(e){return function(t,n){var r=n(),o=r.explorer,l=r.nodes;if(o.isVisible)t(g());else{var u=l[e];t(E(e)),u||t(i(e));var s=1!==e;s&&t(a(e))}}}function l(e){return function(t,n){var r=n(),a=r.nodes,o=a[e];t(y(e)),!o||o.children.isFetching||o.children.isLoaded||t(i(e))}}Object.defineProperty(t,"__esModule",{value:!0}),t.popPage=t.closeExplorer=void 0,t.toggleExplorer=o,t.pushPage=l;var u=n(527),s=n(589),c=r(s),d=n(332),p=(0,u.createAction)("GET_PAGE_START"),f=(0,u.createAction)("GET_PAGE_SUCCESS",function(e,t){return{id:e,data:t}}),m=(0,u.createAction)("GET_PAGE_FAILURE",function(e,t){return{id:e,error:t}}),_=(0,u.createAction)("GET_CHILDREN_START",function(e){return{id:e}}),P=(0,u.createAction)("GET_CHILDREN_SUCCESS",function(e,t,n){return{id:e,items:t,meta:n}}),h=(0,u.createAction)("GET_CHILDREN_FAILURE",function(e,t){return{id:e,error:t}}),E=(0,u.createAction)("OPEN_EXPLORER",function(e){return{id:e}}),g=t.closeExplorer=(0,u.createAction)("CLOSE_EXPLORER"),y=(t.popPage=(0,u.createAction)("POP_PAGE"),(0,u.createAction)("PUSH_PAGE",function(e){return{id:e}}))},589:function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPageChildren=t.getPage=void 0;var r=n(590),a=n(332);t.getPage=function(e){var t=""+a.ADMIN_API.PAGES+e+"/";return(0,r.get)(t)},t.getPageChildren=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.ADMIN_API.PAGES+"?child_of="+t;return n.fields&&(i+="&fields="+e.encodeURIComponent(n.fields.join(","))),n.onlyWithChildren&&(i+="&has_children=1"),n.offset&&(i+="&offset="+n.offset),i+=a.ADMIN_API.EXTRA_CHILDREN_PARAMETERS,(0,r.get)(i)}}).call(t,function(){return this}())},590:function(e,t){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e.fetch,r=e.Headers,a=15e3,i=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t},o=function(e){return e.json()},l=function(e,t){var n=new Promise(function(n,r){var a=setTimeout(function(){r(new Error("Response timeout"))},e);t.then(function(e){clearTimeout(a),n(e)},function(e){clearTimeout(a),r(e)})});return n},u=function(e,t){var u={credentials:"same-origin",headers:new r({Accept:"application/json","Content-Type":"application/json"}),method:e};return l(a,n(t,u)).then(i).then(o)};t.get=function(e){return u("GET",e)}}).call(t,function(){return this}())},591:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(302),s=r(u),c=n(592),d=r(c),p=n(332),f=n(301),m=r(f),_=n(331),P=r(_),h=n(333),E=r(h),g=n(595),y=r(g),v=n(596),T=r(v),b=n(597),R=r(b),S=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={transition:h.PUSH,paused:!1},n.onItemClick=n.onItemClick.bind(n),n.onHeaderClick=n.onHeaderClick.bind(n),n.clickOutside=n.clickOutside.bind(n),n}return o(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.path,n=e.path.length>t.length;this.setState({transition:n?h.PUSH:h.POP})}},{key:"componentDidMount",value:function(){document.querySelector("[data-explorer-menu-item]").classList.add("submenu-active"),document.body.classList.add("explorer-open"),document.addEventListener("mousedown",this.clickOutside),document.addEventListener("touchstart",this.clickOutside)}},{key:"componentWillUnmount",value:function(){document.querySelector("[data-explorer-menu-item]").classList.remove("submenu-active"),document.body.classList.remove("explorer-open"),document.removeEventListener("mousedown",this.clickOutside),document.removeEventListener("touchstart",this.clickOutside)}},{key:"clickOutside",value:function(e){var t=this.props.onClose,n=document.querySelector("[data-explorer-menu]"),r=document.querySelector("[data-explorer-menu-item]"),a=n.contains(e.target)||r.contains(e.target);a||t(),r.contains(e.target)&&this.setState({paused:!0})}},{key:"onItemClick",value:function(e,t){var n=this.props.pushPage;t.preventDefault(),t.stopPropagation(),n(e)}},{key:"onHeaderClick",value:function(e){var t=this.props,n=t.path,r=t.popPage,a=n.length>1;a&&(e.preventDefault(),e.stopPropagation(),r())}},{key:"renderChildren",value:function(){var e=this,t=this.props,n=t.page,r=t.nodes,a=void 0;return a=n.isFetching||n.children.items?s.default.createElement("div",{key:"children"},n.children.items.map(function(t){return s.default.createElement(T.default,{key:t,item:r[t],onClick:e.onItemClick.bind(null,t)})})):s.default.createElement("div",{key:"empty",className:"c-explorer__placeholder"},p.STRINGS.NO_RESULTS),s.default.createElement("div",{className:"c-explorer__drawer"},a,n.isFetching?s.default.createElement("div",{key:"fetching",className:"c-explorer__placeholder"},s.default.createElement(P.default,null)):null,n.isError?s.default.createElement("div",{key:"error",className:"c-explorer__placeholder"},p.STRINGS.SERVER_ERROR):null)}},{key:"render",value:function(){var e=this.props,t=e.page,n=e.onClose,r=e.path,a=this.state,i=a.transition,o=a.paused;return s.default.createElement(d.default,{tag:"nav",className:"explorer",paused:o||!t||t.isFetching,focusTrapOptions:{onDeactivate:n}},s.default.createElement(m.default,{className:"c-explorer__close u-hidden",onClick:n},p.STRINGS.CLOSE_EXPLORER),s.default.createElement(E.default,{name:i,className:"c-explorer"},s.default.createElement("div",{key:r.length,className:"c-transition-group"},s.default.createElement(y.default,{depth:r.length,page:t,onClick:this.onHeaderClick}),this.renderChildren(),t.isError||t.children.items&&t.children.count>p.MAX_EXPLORER_PAGES?s.default.createElement(R.default,{page:t}):null)))}}]),t}(s.default.Component);t.default=S,S.propTypes={nodes:s.default.PropTypes.object.isRequired,path:s.default.PropTypes.array,page:s.default.PropTypes.shape({isFetching:s.default.PropTypes.bool,children:s.default.PropTypes.shape({items:s.default.PropTypes.array})}),onClose:s.default.PropTypes.func.isRequired,popPage:s.default.PropTypes.func.isRequired,pushPage:s.default.PropTypes.func.isRequired}},595:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(302),i=r(a),o=n(332),l=n(301),u=r(l),s=n(329),c=r(s),d=function(e){var t=e.page,n=e.depth,r=e.onClick,a=1===n;return i.default.createElement(u.default,{href:t.id?""+o.ADMIN_URLS.PAGES+t.id+"/":o.ADMIN_URLS.PAGES,className:"c-explorer__header",onClick:r},i.default.createElement("div",{className:"c-explorer__header__inner"},i.default.createElement(c.default,{name:a?"home":"arrow-left"}),i.default.createElement("span",null,t.title||o.STRINGS.PAGES)))};d.propTypes={page:i.default.PropTypes.shape({id:i.default.PropTypes.oneOfType([i.default.PropTypes.string,i.default.PropTypes.number]),title:i.default.PropTypes.string}).isRequired,depth:i.default.PropTypes.number.isRequired,onClick:i.default.PropTypes.func.isRequired},t.default=d},596:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(302),i=r(a),o=n(332),l=n(329),u=r(l),s=n(301),c=r(s),d=n(330),p=r(d),f=function(e){var t=e.item,n=e.onClick,r=t.id,a=t.title,l=t.meta,s=l.children.count>0,d=l.status.live&&!l.status.has_unpublished_changes;return i.default.createElement("div",{className:"c-explorer__item"},i.default.createElement(c.default,{href:""+o.ADMIN_URLS.PAGES+r+"/",className:"c-explorer__item__link"},s?i.default.createElement(u.default,{name:"folder-inverse",className:"c-explorer__children"}):null,i.default.createElement("h3",{className:"c-explorer__item__title"},a),d?null:i.default.createElement("span",{className:"c-explorer__meta"},i.default.createElement(p.default,{status:l.status}))),i.default.createElement(c.default,{href:""+o.ADMIN_URLS.PAGES+r+"/edit/",className:"c-explorer__item__action c-explorer__item__action--small"},i.default.createElement(u.default,{name:"edit",title:o.STRINGS.EDIT+" '"+a+"'"})),s?i.default.createElement(c.default,{className:"c-explorer__item__action",onClick:n},i.default.createElement(u.default,{name:"arrow-right",title:o.STRINGS.SEE_CHILDREN})):null)};f.propTypes={item:i.default.PropTypes.shape({id:i.default.PropTypes.oneOfType([i.default.PropTypes.string,i.default.PropTypes.number]).isRequired,title:i.default.PropTypes.string.isRequired,meta:i.default.PropTypes.shape({status:i.default.PropTypes.object.isRequired}).isRequired}).isRequired,onClick:i.default.PropTypes.func.isRequired},t.default=f},597:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(302),i=r(a),o=n(332),l=n(329),u=r(l),s=function(e){var t=e.page,n=t.children.count;return i.default.createElement("a",{href:""+o.ADMIN_URLS.PAGES+t.id+"/",className:"c-explorer__see-more",tabIndex:0},o.STRINGS.SEE_ALL,i.default.createElement("span",null," "+n+" "+(1===n?o.STRINGS.PAGE.toLowerCase():o.STRINGS.PAGES.toLowerCase())),i.default.createElement(u.default,{name:"arrow-right"}))};s.propTypes={page:i.default.PropTypes.object.isRequired},t.default=s},598:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(302),o=a(i),l=n(487),u=n(526),s=r(u),c=n(301),d=a(c),p=function(e){var t=e.children,n=e.onToggle;return o.default.createElement(d.default,{icon:["folder-open-inverse","arrow-right-after"],onClick:n},t)};p.propTypes={onToggle:o.default.PropTypes.func.isRequired,children:o.default.PropTypes.node.isRequired};var f=function(){return{}},m=function(e){return{onToggle:function(t){return e(s.toggleExplorer(t))}}},_=function(e,t,n){return{children:n.children,onToggle:t.onToggle.bind(null,n.startPage)}};t.default=(0,l.connect)(f,m,_)(p)},599:function(e,t){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1],n=t.type,a=t.payload,i=Object.assign({},e);switch(n){case"OPEN_EXPLORER":i.path=[a.id],i.isVisible=!0;break;case"CLOSE_EXPLORER":i.path=[],i.isVisible=!1;break;case"PUSH_PAGE":i.path=i.path.concat([a.id]);break;case"POP_PAGE":i.path=i.path.slice(0,-1)}return i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r={isVisible:!1,path:[]}},600:function(e,t){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1],n=t.type,i=t.payload,o=Object.assign({},e);switch(n){case"OPEN_EXPLORER":o[i.id]=Object.assign({},a,o[i.id]);break;case"GET_PAGE_SUCCESS":o[i.id]=Object.assign({},o[i.id],i.data),o[i.id].isError=!1;break;case"GET_CHILDREN_START":o[i.id]=Object.assign({},o[i.id]),o[i.id].isFetching=!0,o[i.id].children=Object.assign({},o[i.id].children),o[i.id].children.isFetching=!0;break;case"GET_CHILDREN_SUCCESS":o[i.id]=Object.assign({},o[i.id]),o[i.id].isFetching=!1,o[i.id].isError=!1,o[i.id].children=Object.assign({},o[i.id].children,{items:o[i.id].children.items.slice(),count:i.meta.total_count,isFetching:!1,isLoaded:!0,isError:!1}),i.items.forEach(function(e){o[e.id]=Object.assign({},a,o[e.id],e),o[i.id].children.items.push(e.id)});break;case"GET_PAGE_FAILURE":case"GET_CHILDREN_FAILURE":o[i.id]=Object.assign({},o[i.id]),o[i.id].isFetching=!1,o[i.id].isError=!0,o[i.id].children.isFetching=!1}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r={},a={isFetching:!1,isLoaded:!0,isError:!1,children:{items:[],count:0,isFetching:!1},meta:{children:{}}}}});